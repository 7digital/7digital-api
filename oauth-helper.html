<!DOCTYPE html>  <html> <head>   <title>oauth-helper.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="customconfig.html">                 customconfig.js               </a>                                           <a class="source" href="default-action.html">                 default-action.js               </a>                                           <a class="source" href="oauth.html">                 oauth.js               </a>                                           <a class="source" href="simpleclient.html">                 simpleclient.js               </a>                                           <a class="source" href="trackpreview.html">                 trackpreview.js               </a>                                           <a class="source" href="two-legged.html">                 two-legged.js               </a>                                           <a class="source" href="api.html">                 api.js               </a>                                           <a class="source" href="helpers.html">                 helpers.js               </a>                                           <a class="source" href="logger.html">                 logger.js               </a>                                           <a class="source" href="oauth-helper.html">                 oauth-helper.js               </a>                                           <a class="source" href="request.html">                 request.js               </a>                                           <a class="source" href="resource.html">                 resource.js               </a>                                           <a class="source" href="responseparser.html">                 responseparser.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               oauth-helper.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Regular expressions for parsing the XML OAuth response</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Creates an OAuth v1 wrapper configured with the supplied key and
secret and the necessary options for authenticating with the
7digital API.</p>

<ul>
<li>@param {String} oauthkey</li>
<li><p>@param {String} oauthsecret</p></li>
<li><p>@return {OAuth}</p></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Gets a request token from the 7digital API and generates an authorise
url for the user to grant the application access to their locker and
make purchases on their behalf.</p>

<pre><code>var oauthHelper = require('oauth-helper');
oauthHelper.getRequestToken({
        oauthkey: 'YOUR_KEY_HERE',
        oauthsecret: 'YOUR_SECRET',
        callbackUrl: ''
    }, function authorise(err, requestToken, requestSecret,
                      authoriseUrl) {
         // Get an access token
});
</code></pre>

<p>The options parameter should contain the following</p>

<ul>
<li><code>oauthkey</code> your app's oauth consumer key</li>
<li><code>oauthsecret</code> your app's oauth consumer secret</li>
<li><p><code>callbackUrl</code> (optional) the url to return once the user has authorised
             your app</p>

<ul><li>@param {Object} options</li>
<li>@param {Function} callback</li></ul></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>The OAuth endpoints on the 7digital API return XML instead of
an encoded parameter response.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Parse the token and secret from the XML</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>re-encode the token and secret as the node oauth client
decodes them thinking they are parameter encoded as per
the spec.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Gets an access token from the 7digital API for signing requests to
access a user's 7digital account on their behalf.</p>

<p>You must generate your access token only after the user has authorised
the request token.</p>

<p>You can use this token and secret for signing requests to the 3-legged
OAuth secured API endpoints.</p>

<pre><code>var oauthHelper = require('oauth-helper');
oauthHelper.getAccessToken({
        oauthkey: 'YOUR_KEY_HERE',
        oauthsecret: 'YOUR_SECRET_HERE',
        requesttoken: 'YOUR_TOKEN_HERE',
        requestsecret: 'TOKEN_SECRET_HERE'
    }, function accessSignedEndpoints(err, accesstoken, accesssecret) {
        // Access the user's locker etc
});
</code></pre>

<p>The options parameter should contain the following</p>

<ul>
<li><code>requesttoken</code> an authorised OAuth request token</li>
<li><p><code>requestsecret</code> the corresponding OAuth request secret</p>

<ul><li>@param {Object} options</li>
<li>@param {Function} callback</li></ul></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>The OAuth endpoints on the 7digital API return XML instead of
an encoded parameter response.</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>The OAuth endpoints on the 7digital API return XML instead of an
encoded parameter response so we need to parse the token and
secret from the XML</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Parse the token and secret from the XML</p>             </td>             <td class="code">               <div class="highlight"><pre>undefined</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 